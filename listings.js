"use strict";(()=>{var x=window.$memberstackDom,L=window.location.href.split("/").pop(),w=L==null?void 0:L.split("?")[0];x.getCurrentMember().then(({data:e})=>{e||D()});var D=()=>{let e=!0,t=document.referrer.split("/").pop(),c=t==null?void 0:t.split("?")[0],a=document.querySelectorAll('[data-element="refferer-item"]');if(!a)return;a.forEach(o=>{var d,m;let n=(d=o.querySelector('[data-element="refferer-name"]'))==null?void 0:d.textContent,l=(m=o.querySelector('[data-element="refferer-listing"]'))==null?void 0:m.textContent;n===c&&l===w&&(e=!1)});let i=new URLSearchParams(window.location.search),r=Object.fromEntries(i.entries());if(r){let o=document.querySelector('[data-element="contact-agent-name"]');if(!o)return;o.textContent=r.name;let n=document.querySelector('[data-element="contact-agent-phone"]');if(!n)return;n.textContent=r.phone,n.closest("a").href="tel:"+r.phone;let l=document.querySelector('[data-element="contact-agent-email"]');if(!l)return;l.textContent=r.email,l.closest("a").href="mailto:"+r.email;let d=document.querySelector('[data-element="contact-agent-agency"]');if(!d)return;d.textContent=r.agency;let m=document.querySelector('[data-element="m-contact-agent-name"]');if(!m)return;m.textContent=r.name;let u=document.querySelector('[data-element="m-contact-agent-phone"]');if(!u)return;u.textContent=r.phone,u.closest("a").href="tel:"+r.phone;let p=document.querySelector('[data-element="m-contact-agent-email"]');if(!p)return;p.textContent=r.email,p.closest("a").href="mailto:"+r.email;let f=document.querySelector('[data-element="m-contact-agent-agency"]');if(!f)return;f.textContent=r.agency}e&&(window.location.href="/login")};$(()=>{x.getCurrentMember().then(({data:e})=>{if(e){let t=e.customFields["first-name"]+" "+e.customFields["last-name"],c=e.customFields.mobile,a=e.auth.email,i=e.customFields["agency-name"],r="?name="+t+"&phone="+c+"&email="+a+"&agency="+i,o=U(21),n="https://"+window.location.hostname+"/fdiautvtnzxynmp/"+o+"/"+r,l=document.querySelector("#input-url"),d=document.querySelector("#input-share-slug"),m=document.querySelector("#input-listing"),u=document.querySelector('[data-element="fake-text"]');l&&(l.value=n),d&&(d.value=o),m&&L&&(m.value=L),u&&(u.innerHTML=n);let p=document.querySelector("#btn-copy-url");p==null||p.addEventListener("click",function(s){T(n)});let f=document.querySelector('[data-element="btn-fake-share-url"]');f==null||f.addEventListener("click",function(s){T(n)})}})});function k(e){let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(c){console.error("Fallback: Oops, unable to copy",c)}document.body.removeChild(t),b('[data-element="wait-notification"]','[data-element="copied-notification"]')}function T(e){if(!navigator.clipboard){k(e);return}navigator.clipboard.writeText(e).then(function(){b('[data-element="wait-notification"]','[data-element="copied-notification"]')},function(t){console.log(t)})}function b(e,t){let c=document.querySelector(e),a=document.querySelector(t);c&&(c.style.display="block"),setTimeout(()=>{c&&(c.style.display="none"),a&&(a.style.display="block"),setTimeout(()=>{a&&(a.style.display="none")},1e3)},3e3)}function U(e){let t="",c="abcdefghijklmnopqrstuvwxyz0123456789",a=c.length;for(let i=0;i<e;i++)t+=c.charAt(Math.floor(Math.random()*a));return t}async function A(e,t){let c;return e=q(e)||"",t?(t=q(t)||"",c="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(e)+"?api_key=keyUxdcC40qxNrt1Y&&view="+encodeURIComponent(t).replace(/%20/g,"+")):c="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(e)+"?api_key=keyUxdcC40qxNrt1Y&",await(await fetch(c)).json()}var C;tableName?A(tableName,tableViewName).then(e=>P(e)):((C=document.querySelector('[data-element="sl-table-wrapper"]'))==null||C.remove(),document.querySelector('[data-element="sl-title"]').textContent="Stocklist not found");var P=e=>{var f;if(e.error){(f=document.querySelector('[data-element="sl-table-wrapper"]'))==null||f.remove(),document.querySelector('[data-element="sl-title"]').textContent="Stocklist not found";return}let t=e.records;t.forEach(s=>{s.fields["Unit/Lot"]&&(s.fields["Unit/Lot"]=parseInt(s.fields["Unit/Lot"])),s.fields.Price&&(s.fields.Price="$"+R(s.fields.Price))});let c=t[0].fields,a=Object.keys(c),r=["Unit/Lot","Price","Beds","Baths","Car Park","Internal"].filter(s=>a.indexOf(s)>-1),o=a.filter(s=>r.indexOf(s)===-1);o.push(o.splice(o.indexOf("Status"),1)[0]),o.forEach(s=>{s!=="Discount"&&r.push(s)});let n=document.querySelector('[data-element="table-row"]'),l=n==null?void 0:n.firstChild;n!=null&&n.innerHTML&&(n.innerHTML="");let d="grid-template-columns: ";r.forEach(s=>{let y=l==null?void 0:l.cloneNode(!0);y.textContent=s,y.setAttribute("data-sortelement",s),n==null||n.append(y),d=d+"1fr "}),document.querySelectorAll(".s-table-row-inner").forEach(s=>{s.setAttribute("style",d)});let m=document.querySelector('[data-element="stocklist-row"]');if(!m)return;let u=m==null?void 0:m.parentElement;if(!u)return;g(t,m,u,"Unit/Lot","asc",r),document.querySelectorAll(".s-table-head-item").forEach(s=>{s.addEventListener("click",y=>{var h,S,E;y.preventDefault(),s.classList.contains("selected")||((h=document.querySelector(".selected"))==null||h.classList.remove("asc"),(S=document.querySelector(".selected"))==null||S.classList.remove("desc"),(E=document.querySelector(".selected"))==null||E.classList.remove("selected")),s.classList.contains("desc")&&!s.classList.contains("first")?(g(t,m,u,s.dataset.sortelement,"asc",r),s.classList.add("selected","asc"),s.classList.remove("desc")):(g(t,m,u,s.dataset.sortelement,"desc",r),s.classList.contains("first")||(s.classList.add("selected","desc"),s.classList.remove("asc")))})})},g=(e,t,c,a,i,r)=>{c.innerHTML="";let o=!1,n=N(e,a,i);for(let l in n)if(n.hasOwnProperty(l)){let d=n[l].fields,m=I(t,d,r);if(!m)return;o&&m.classList.add("colored"),o=!o,c.append(m)}},I=(e,t,c)=>{let a=e.cloneNode(!0),i=a.querySelector(".s-table-cell-item"),r=i==null?void 0:i.parentElement;if(r&&i)return r.innerHTML="",a.innerHTML="",c.forEach(o=>{let n=i.cloneNode(!0);n.setAttribute("data-element",o),n.textContent=t[o],(o==="Internal"||o==="External"||o==="Land Size"||o==="Land"||o==="Lot Size")&&(n.innerHTML=Math.floor(t[o])+"m <sup>2</sup>"),o==="Status"&&(t[o]==="Sold"?n.classList.add("status-red"):t[o]==="Under Contract"?n.classList.add("status-orange"):t[o]==="Available"&&n.classList.add("status-green")),r.append(n)}),a.append(r),a},N=(e,t,c)=>{if(t==="Default")return e;let a=typeof e[0].fields[t];if(!a)return;let i=e.slice(0);return a==="number"?i.sort(function(r,o){let n;return c==="desc"?n=o.fields[t]-r.fields[t]:c==="asc"&&(n=r.fields[t]-o.fields[t]),n}):(a==="string"||a==="Default")&&i.sort(function(r,o){let n=r.fields[t].toLowerCase(),l=o.fields[t].toLowerCase(),d;return c==="desc"?d=l<n?-1:l>n?1:0:c==="asc"&&(d=n<l?-1:n>l?1:0),d}),i};function R(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function q(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent}function H(){var c;let e=(c=document.querySelector('[data-element="address"]'))==null?void 0:c.textContent;if(!e)return;let t="/request-for-contract?address="+encodeURIComponent(e)+"&at="+encodeURIComponent(tableName)+"&atv="+encodeURIComponent(tableViewName);window.open(t,"_blank")}var M;(M=document.querySelector("#btn-request-a-contract"))==null||M.addEventListener("click",e=>{e.preventDefault(),H()});var v;(v=document.querySelector("#btn-request-a-contract-m"))==null||v.addEventListener("click",e=>{e.preventDefault(),H()});})();
