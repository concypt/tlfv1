"use strict";(()=>{$(()=>{let n=$('[data-element="btn-real-back"]'),e=$('[data-element="btn-real-next"]'),t=d();m(t),$("#fc-rfc").on("click","#btn-back",function(){t=d(),t=t-1,m(t),n.trigger("tap")}).on("click","#btn-next",function(){t=d(),N(t)&&(t=t+1,m(t),e.trigger("tap"))})});var d=()=>{let n=parseInt($(".w-slider-aria-label").text().slice(5,7));return isNaN(n)&&(n=1),n},m=n=>{$("#fc-rfc #submit-multi-sign-up").css("display","none"),n===1&&($("#fc-rfc #btn-back").css("display","none"),$("#fc-rfc #btn-next").css("display","block")),(n===2||n===3||n===4||n===4||n===5||n===6||n===7)&&($("#fc-rfc #btn-back").css("display","block"),$("#fc-rfc #btn-next").css("display","block")),n===8&&($("#fc-rfc #btn-back").css("display","block"),$("#fc-rfc #btn-next").css("display","none"),$("#fc-rfc #submit-multi-sign-up").css("display","block"))},N=n=>{if(n===1){let e=$(".error-message.slide1"),t=$("#First-Name").val().trim(),s=$("#Last-Name").val().trim(),a=$("#Email-4").val().trim(),r=$("#Mobile").val().trim(),o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t===""||s===""||a===""||r===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):o.test(a)?(e.addClass("hidden"),!0):(e.html("Please fill all fields to proceedd.").removeClass("hidden"),!1)}if(n===2){let e=$(".error-message.slide2"),t=$("#main-address").val().trim(),s=$("#main-suburb").val().trim(),a=$("#main-city").val().trim(),r=$("#main-postcode").val().trim();return t===""||s===""||a===""||r===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(n===3){let e=$(".error-message.slide3"),t=$("#Single-Or-Joint-2").val().trim(),s=$("#Purchaser-1-Name").val().trim(),a=$("#Purchaser-1-Occopation").val().trim();if(s===""||a==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(t==="Joint"){let r=$("#Purchaser-2-Name").val().trim(),o=$("#Purchaser-2-Occopation").val().trim(),l=$("#Purchaser-2-Email").val().trim(),c=$("#Purchaser-Mobile").val().trim();if(r===""||o===""||l===""||c==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))return e.html("Please enter correct second purchaser email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}if(n===4){let e=$(".error-message.slide4"),t=$("#Buying-entity-type").val().trim(),s=$("#Currently-own-real-estate").val().trim(),a=$("#Purpose").val().trim(),r=$("#Registered-Under-Tax-Act").val().trim(),o=$("#Settlement-for-taxable-supplies").val().trim(),l=$("#Intend-to-nominee").val().trim();return t===""||s===""||a===""||r===""||o===""||l===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(n===5){let e=$(".error-message.slide5"),t=$("#autoComplete").val().trim(),s=$("#Unit").val().trim(),a=$("#additional-notes").val().trim();return t===""||s===""||a===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(n===6){let e=$(".error-message.slide6"),t=$("#Purchaser-Agent").val().trim(),s=$("#radio:checked").val().trim();if(t==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(s==="Custom Lawyer"){let a=$("#Lawyer-Name").val().trim(),r=$("#Lawyer-Firm").val().trim(),o=$("#Lawyer-Email").val().trim(),l=$("#Lawyer-Mobile").val().trim();if(a===""||r===""||o===""||l==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return e.html("Please enter correct lawyer email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}if(n===7){let e=$(".error-message.slide7");if($("#radio-2:checked").val().trim()==="Custom Broker"){let s=$("#Broker-Name").val().trim(),a=$("#Broker-Firm").val().trim(),r=$("#Broker-Email").val().trim(),o=$("#Broker-Mobile").val().trim();if(s===""||a===""||r===""||o==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return e.html("Please enter correct broker email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}},D=window.$memberstackDom;D.getCurrentMember().then(({data:n})=>{if(n){let e=document.querySelector("#memberstack_id");if(!e)return;e.value=n.id}});var u=document.querySelector('[data-element="Purchaser"]');u==null||u.addEventListener("change",n=>{n.preventDefault();let e=n.target.value,t=document.querySelector('[data-purchaser="Joint"]');e==="Joint"&&(t==null||t.classList.remove("hide")),e==="Single"&&(t==null||t.classList.add("hide"))});var f=document.querySelector('[data-element="Buying Entity Type"]');f==null||f.addEventListener("change",n=>{n.preventDefault();let e=n.target.value,t=document.querySelector('[data-element="Buying Entity Name"]');e!=="Named above"&&(t==null||t.classList.remove("hide")),(e==="Named above"||e==="")&&(t==null||t.classList.add("hide"))});var y=[];document.querySelectorAll('[data-element="listing-item"]').forEach(n=>{var a,r;let e=(a=n.querySelector('[data-element="listing-address"]'))==null?void 0:a.textContent,t=(r=n.querySelector('[data-element="listing-airtable"]'))==null?void 0:r.textContent,s={address:e,airtable:t};s&&y.push(s)});document.querySelectorAll('[data-element="listing-item2"]').forEach(n=>{var a,r;let e=(a=n.querySelector('[data-element="listing-address2"]'))==null?void 0:a.textContent,t=(r=n.querySelector('[data-element="listing-airtable2"]'))==null?void 0:r.textContent,s={address:e,airtable:t};s&&y.push(s)});var p=new autoComplete({placeHolder:"Search for listing...",data:{src:y,keys:["address"],cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let e=n.detail.selection.value;p.input.value=e}}}}),E;(E=document.querySelector("#autoComplete"))==null||E.addEventListener("selection",function(n){let e=n.detail;p.input.blur();let t=e.selection.value[e.selection.key];p.input.value=t;let s=e.selection.value.airtable;M(s).then(a=>H(a))});var I=[];document.querySelectorAll('[data-element="agent-item"]').forEach(n=>{var t,s;let e=((t=n.querySelector('[data-element="agent-first-name"]'))==null?void 0:t.textContent)+" "+((s=n.querySelector('[data-element="agent-last-name"]'))==null?void 0:s.textContent);e&&I.push(e)});var F=new autoComplete({selector:"#Purchaser-Agent",placeHolder:"Search for Agents...",data:{src:I,cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let e=n.detail.selection.value;F.input.value=e}}}}),J=document.querySelector("[at-pat-r]").getAttribute("at-pat-r");async function M(n,e){let t;n=P(n)||"",e?(e=P(e)||"",t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(n)+"?view="+encodeURIComponent(e).replace(/%20/g,"+")):t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(n);let s={Authorization:`Bearer ${J}`};return await(await fetch(t,{headers:s})).json()}var H=n=>{let e=document.querySelector('[data-element="AvailableUnits"]');if(!e)return;let t=e.options.length-1,s;for(s=t;s>=1;s--)e.remove(s);let a=n.records,r=[];a&&(a.forEach(o=>{let l="Unit "+o.fields["Unit/Lot"]+" - $"+W(o.fields.Price)+" / "+(o.fields.Land?o.fields.Land:"")+(o.fields.Land?"sqm / ":"")+o.fields.Beds+" / "+o.fields.Baths+" / "+o.fields["Car Park"];r.push(l)}),r.sort(K),r.forEach(o=>{let l=document.createElement("option");l.text=o+"",l.value=o+"",e==null||e.add(l)}))},O="a95d779bec144d448ebcafccdec4ce61";function _(){let n=new AddyComplete(document.getElementById("main-address"));n.options.excludePostBox=!1,n.fields={address1:document.getElementById("main-address"),address2:document.getElementById("main-address2"),city:document.getElementById("main-city"),postcode:document.getElementById("main-postcode"),suburb:document.getElementById("main-suburb")}}(function(n,e){let t=n.createElement("script"),s="https://www.addysolutions.com/address-lookup/1.6.2/js/addy.min.js";t.src=s+"?loadcss=true&enableLocation=false&country=nz&nzKey="+O,t.type="text/javascript",t.async=1,t.onload=_,n.body.appendChild(t)})(document,window);var h=(n,e,t)=>{let s=n==null?void 0:n.cloneNode(!0),a=s.querySelector("span"),r=s.querySelector("input");if(!(!a||!r))return a.textContent=e.toString(),r.value=t.toString(),s},U=(n,e,t)=>{let s=e==null?void 0:e.parentElement;e==null||e.remove(),n.forEach((a,r,o)=>{var v,C,b,L,S,x,w,k;let l=a,c="Yes - "+((v=l.querySelector('[data-element="'+t+' Location"]'))==null?void 0:v.textContent)+(t!=="Lawyer"?" ":": ")+((C=l.querySelector('[data-element="'+t+' Name"]'))==null?void 0:C.textContent)+" at "+((b=l.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:b.textContent)+" ("+((L=l.querySelector('[data-element="'+t+' Email"]'))==null?void 0:L.textContent)+" / "+((S=l.querySelector('[data-element="'+t+' Phone"]'))==null?void 0:S.textContent)+") ",g=((x=l.querySelector('[data-element="'+t+' Location"]'))==null?void 0:x.textContent)+": "+((w=l.querySelector('[data-element="'+t+' Name"]'))==null?void 0:w.textContent)+" at "+((k=l.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:k.textContent);if(e){let q=h(e,c,g);if(q&&(s==null||s.append(q)),r===o.length-1){let i;t==="Lawyer"?i=h(e,"No - please fill in purchaser solicitors section below","Custom Lawyer"):i=h(e,"No - please fill in purchaser broker section below","Custom Broker"),i&&(s==null||s.append(i));let B=s==null?void 0:s.querySelector(".w-form-formradioinput:first-child");B&&(B.checked=!0)}}})},z=document.querySelectorAll('[data-element="Lawyer Item"]'),R=document.querySelector('[data-element="Lawyer Radio"]');R&&U(z,R,"Lawyer");var V=document.querySelectorAll('[data-element="Broker Item"]'),A=document.querySelector('[data-element="Broker Radio"]');A&&U(V,A,"Broker");document.addEventListener("click",function(n){var t,s,a,r;let e=n.target;e.classList.contains("lawyer-radio")&&(e.value==="Custom Lawyer"?(t=document.querySelector('[data-element="Custom Lawyer"]'))==null||t.classList.remove("hide"):(s=document.querySelector('[data-element="Custom Lawyer"]'))==null||s.classList.add("hide")),e.classList.contains("broker-radio")&&(e.value==="Custom Broker"?(a=document.querySelector('[data-element="Custom Broker"]'))==null||a.classList.remove("hide"):(r=document.querySelector('[data-element="Custom Broker"]'))==null||r.classList.add("hide"))});function W(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function K(n,e){let t=[],s=[];for(n.replace(/(\d+)|(\D+)/g,function(a,r,o){t.push([r||1/0,o||""])}),e.replace(/(\d+)|(\D+)/g,function(a,r,o){s.push([r||1/0,o||""])});t.length&&s.length;){let a=t.shift(),r=s.shift(),o=a[0]-r[0]||a[1].localeCompare(r[1]);if(o)return o}return t.length-s.length}$(()=>{let n=new Proxy(new URLSearchParams(window.location.search),{get:(r,o)=>r.get(o)}),{address:e}=n,{at:t}=n,{atv:s}=n,a=document.querySelector('[data-element="Listing"]');a.value=e,t&&M(t,s).then(r=>H(r))});function P(n){return new DOMParser().parseFromString(n,"text/html").documentElement.textContent}})();
