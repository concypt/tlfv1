"use strict";(()=>{var U=window.$memberstackDom;U.getCurrentMember().then(({data:n})=>{if(n){let e=document.querySelector("#memberstack_id");if(!e)return;e.value=n.id}});var i=document.querySelector('[data-element="Purchaser"]');i==null||i.addEventListener("change",n=>{n.preventDefault();let e=n.target.value,t=document.querySelector('[data-purchaser="Joint"]');e==="Joint"&&(t==null||t.classList.remove("hide")),e==="Single"&&(t==null||t.classList.add("hide"))});var d=document.querySelector('[data-element="Buying Entity Type"]');d==null||d.addEventListener("change",n=>{n.preventDefault();let e=n.target.value,t=document.querySelector('[data-element="Buying Entity Name"]');e!=="Named above"&&(t==null||t.classList.remove("hide")),(e==="Named above"||e==="")&&(t==null||t.classList.add("hide"))});var f=[];document.querySelectorAll('[data-element="listing-item"]').forEach(n=>{var a,s;let e=(a=n.querySelector('[data-element="listing-address"]'))==null?void 0:a.textContent,t=(s=n.querySelector('[data-element="listing-airtable"]'))==null?void 0:s.textContent,o={address:e,airtable:t};o&&f.push(o)});document.querySelectorAll('[data-element="listing-item2"]').forEach(n=>{var a,s;let e=(a=n.querySelector('[data-element="listing-address2"]'))==null?void 0:a.textContent,t=(s=n.querySelector('[data-element="listing-airtable2"]'))==null?void 0:s.textContent,o={address:e,airtable:t};o&&f.push(o)});var m=new autoComplete({placeHolder:"Search for listing...",data:{src:f,keys:["address"],cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let e=n.detail.selection.value;m.input.value=e}}}}),I;(I=document.querySelector("#autoComplete"))==null||I.addEventListener("selection",function(n){let e=n.detail;m.input.blur();let t=e.selection.value[e.selection.key];m.input.value=t;let o=e.selection.value.airtable;B(o).then(a=>R(a))});var A=[];document.querySelectorAll('[data-element="agent-item"]').forEach(n=>{var t,o;let e=((t=n.querySelector('[data-element="agent-first-name"]'))==null?void 0:t.textContent)+" "+((o=n.querySelector('[data-element="agent-last-name"]'))==null?void 0:o.textContent);e&&A.push(e)});var D=new autoComplete({selector:"#Purchaser-Agent",placeHolder:"Search for Agents...",data:{src:A,cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let e=n.detail.selection.value;D.input.value=e}}}});async function B(n,e){let t;return n=k(n)||"",e?(e=k(e)||"",t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(n)+"?api_key=keyUxdcC40qxNrt1Y&&view="+encodeURIComponent(e).replace(/%20/g,"+")):t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(n)+"?api_key=keyUxdcC40qxNrt1Y&",await(await fetch(t)).json()}var R=n=>{let e=document.querySelector('[data-element="AvailableUnits"]');if(!e)return;let t=e.options.length-1,o;for(o=t;o>=1;o--)e.remove(o);let a=n.records,s=[];a&&(a.forEach(c=>{let r="Unit "+c.fields["Unit/Lot"]+" - $"+F(c.fields.Price)+" / "+(c.fields.Land?c.fields.Land:"")+(c.fields.Land?"sqm / ":"")+c.fields.Beds+" / "+c.fields.Baths+" / "+c.fields["Car Park"];s.push(r)}),s.sort(W),s.forEach(c=>{let r=document.createElement("option");r.text=c+"",r.value=c+"",e==null||e.add(r)}))},J="a95d779bec144d448ebcafccdec4ce61";function N(){let n=new AddyComplete(document.getElementById("main-address"));n.options.excludePostBox=!1,n.fields={address1:document.getElementById("main-address"),address2:document.getElementById("main-address2"),city:document.getElementById("main-city"),postcode:document.getElementById("main-postcode"),suburb:document.getElementById("main-suburb")}}(function(n,e){let t=n.createElement("script"),o="https://www.addysolutions.com/address-lookup/1.6.2/js/addy.min.js";t.src=o+"?loadcss=true&enableLocation=false&country=nz&nzKey="+J,t.type="text/javascript",t.async=1,t.onload=N,n.body.appendChild(t)})(document,window);var u=(n,e,t)=>{let o=n==null?void 0:n.cloneNode(!0),a=o.querySelector("span"),s=o.querySelector("input");if(!(!a||!s))return a.textContent=e.toString(),s.value=t.toString(),o},E=(n,e,t)=>{let o=e==null?void 0:e.parentElement;e==null||e.remove(),n.forEach((a,s,c)=>{var y,p,h,g,L,S,C,q;let r=a,H="Yes - "+((y=r.querySelector('[data-element="'+t+' Location"]'))==null?void 0:y.textContent)+(t!=="Lawyer"?" ":": ")+((p=r.querySelector('[data-element="'+t+' Name"]'))==null?void 0:p.textContent)+" at "+((h=r.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:h.textContent)+" ("+((g=r.querySelector('[data-element="'+t+' Email"]'))==null?void 0:g.textContent)+" / "+((L=r.querySelector('[data-element="'+t+' Phone"]'))==null?void 0:L.textContent)+") ",M=((S=r.querySelector('[data-element="'+t+' Location"]'))==null?void 0:S.textContent)+": "+((C=r.querySelector('[data-element="'+t+' Name"]'))==null?void 0:C.textContent)+" at "+((q=r.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:q.textContent);if(e){let v=u(e,H,M);if(v&&(o==null||o.append(v)),s===c.length-1){let l;t==="Lawyer"?l=u(e,"No - please fill in purchaser solicitors section below","Custom Lawyer"):l=u(e,"No - please fill in purchaser broker section below","Custom Broker"),l&&(o==null||o.append(l));let w=o==null?void 0:o.querySelector(".w-form-formradioinput:first-child");w&&(w.checked=!0)}}})},P=document.querySelectorAll('[data-element="Lawyer Item"]'),x=document.querySelector('[data-element="Lawyer Radio"]');x&&E(P,x,"Lawyer");var _=document.querySelectorAll('[data-element="Broker Item"]'),b=document.querySelector('[data-element="Broker Radio"]');b&&E(_,b,"Broker");document.addEventListener("click",function(n){var t,o,a,s;let e=n.target;e.classList.contains("lawyer-radio")&&(e.value==="Custom Lawyer"?(t=document.querySelector('[data-element="Custom Lawyer"]'))==null||t.classList.remove("hide"):(o=document.querySelector('[data-element="Custom Lawyer"]'))==null||o.classList.add("hide")),e.classList.contains("broker-radio")&&(e.value==="Custom Broker"?(a=document.querySelector('[data-element="Custom Broker"]'))==null||a.classList.remove("hide"):(s=document.querySelector('[data-element="Custom Broker"]'))==null||s.classList.add("hide"))});function F(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function W(n,e){let t=[],o=[];for(n.replace(/(\d+)|(\D+)/g,function(a,s,c){t.push([s||1/0,c||""])}),e.replace(/(\d+)|(\D+)/g,function(a,s,c){o.push([s||1/0,c||""])});t.length&&o.length;){let a=t.shift(),s=o.shift(),c=a[0]-s[0]||a[1].localeCompare(s[1]);if(c)return c}return t.length-o.length}$(()=>{let n=new Proxy(new URLSearchParams(window.location.search),{get:(s,c)=>s.get(c)}),{address:e}=n,{at:t}=n,{atv:o}=n,a=document.querySelector('[data-element="Listing"]');a.value=e,t&&B(t,o).then(s=>R(s))});function k(n){return new DOMParser().parseFromString(n,"text/html").documentElement.textContent}})();
