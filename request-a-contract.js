"use strict";(()=>{$(()=>{let s=$('[data-element="btn-real-back"]'),e=$('[data-element="btn-real-next"]'),t=m();u(t),l(t),$("#fc-rfc").on("click","#btn-back",function(){t=m(),t=t-1,u(t),l(t),s.trigger("tap")}).on("click","#btn-next",function(){t=m(),F(t)&&(t=t+1,u(t),l(t),e.trigger("tap"))})});var D=s=>{$(".mask---brix.request").css("height",s)},l=s=>{let e=$(window).width();if(e){let t=$("#w-slider-mask-0 .w-slide:nth-child("+s+" ) > .slider-content-wrap---brix").height();if(t){let n=e<324?75:50,r=Math.round(t)+n;D(r+"px")}}},m=()=>{let s=parseInt($(".w-slider-aria-label").text().slice(5,7));return isNaN(s)&&(s=1),s},u=s=>{$("#fc-rfc #submit-multi-sign-up").css("display","none"),s===1&&($("#fc-rfc #btn-back").css("display","none"),$("#fc-rfc #btn-next").css("display","block")),(s===2||s===3||s===4||s===4||s===5||s===6||s===7)&&($("#fc-rfc #btn-back").css("display","block"),$("#fc-rfc #btn-next").css("display","block")),s===8&&($("#fc-rfc #btn-back").css("display","block"),$("#fc-rfc #btn-next").css("display","none"),$("#fc-rfc #submit-multi-sign-up").css("display","block"))},F=s=>{if(s===1){let e=$(".error-message.slide1"),t=$("#First-Name").val().trim(),n=$("#Last-Name").val().trim(),r=$("#Email-4").val().trim(),a=$("#Mobile").val().trim(),o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t===""||n===""||r===""||a===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):o.test(r)?(e.addClass("hidden"),!0):(e.html("Please fill all fields to proceedd.").removeClass("hidden"),!1)}if(s===2){let e=$(".error-message.slide2"),t=$("#main-address").val().trim(),n=$("#main-suburb").val().trim(),r=$("#main-city").val().trim(),a=$("#main-postcode").val().trim();return t===""||n===""||r===""||a===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(s===3){let e=$(".error-message.slide3"),t=$("#Single-Or-Joint-2").val().trim(),n=$("#Purchaser-1-Name").val().trim(),r=$("#Purchaser-1-Occopation").val().trim();if(n===""||r==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(t==="Joint"){let a=$("#Purchaser-2-Name").val().trim(),o=$("#Purchaser-2-Occopation").val().trim(),i=$("#Purchaser-2-Email").val().trim(),c=$("#Purchaser-Mobile").val().trim();if(a===""||o===""||i===""||c==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return e.html("Please enter correct second purchaser email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}if(s===4){let e=$(".error-message.slide4"),t=$("#Buying-entity-type").val().trim(),n=$("#Currently-own-real-estate").val().trim(),r=$("#Purpose").val().trim(),a=$("#Registered-Under-Tax-Act").val().trim(),o=$("#Settlement-for-taxable-supplies").val().trim(),i=$("#Intend-to-nominee").val().trim();return t===""||n===""||r===""||a===""||o===""||i===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(s===5){let e=$(".error-message.slide5"),t=$("#autoComplete").val().trim(),n=$("#Unit").val().trim(),r=$("#additional-notes").val().trim();return t===""||n===""||r===""?(e.html("Please fill all fields to proceed.").removeClass("hidden"),!1):(e.addClass("hidden"),!0)}if(s===6){let e=$(".error-message.slide6"),t=$("#Purchaser-Agent").val().trim(),n=$("#radio:checked").val().trim();if(t==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(n==="Custom Lawyer"){let r=$("#Lawyer-Name").val().trim(),a=$("#Lawyer-Firm").val().trim(),o=$("#Lawyer-Email").val().trim(),i=$("#Lawyer-Mobile").val().trim();if(r===""||a===""||o===""||i==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return e.html("Please enter correct lawyer email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}if(s===7){let e=$(".error-message.slide7");if($("#radio-2:checked").val().trim()==="Custom Broker"){let n=$("#Broker-Name").val().trim(),r=$("#Broker-Firm").val().trim(),a=$("#Broker-Email").val().trim(),o=$("#Broker-Mobile").val().trim();if(n===""||r===""||a===""||o==="")return e.html("Please fill all fields to proceed.").removeClass("hidden"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return e.html("Please enter correct broker email.").removeClass("hidden"),!1}return e.addClass("hidden"),!0}},J=window.$memberstackDom;J.getCurrentMember().then(({data:s})=>{if(s){let e=document.querySelector("#memberstack_id");if(!e)return;e.value=s.id}});var f=document.querySelector('[data-element="Purchaser"]');f==null||f.addEventListener("change",s=>{s.preventDefault();let e=s.target.value,t=document.querySelector('[data-purchaser="Joint"]');e==="Joint"&&(t==null||t.classList.remove("hide"),l(3)),e==="Single"&&(t==null||t.classList.add("hide"),l(3))});var g=document.querySelector('[data-element="Buying Entity Type"]');g==null||g.addEventListener("change",s=>{s.preventDefault();let e=s.target.value,t=document.querySelector('[data-element="Buying Entity Name"]');e!=="Named above"&&(t==null||t.classList.remove("hide"),l(4)),(e==="Named above"||e==="")&&(t==null||t.classList.add("hide"),l(4))});var y=[];document.querySelectorAll('[data-element="listing-item"]').forEach(s=>{var r,a;let e=(r=s.querySelector('[data-element="listing-address"]'))==null?void 0:r.textContent,t=(a=s.querySelector('[data-element="listing-airtable"]'))==null?void 0:a.textContent,n={address:e,airtable:t};n&&y.push(n)});document.querySelectorAll('[data-element="listing-item2"]').forEach(s=>{var r,a;let e=(r=s.querySelector('[data-element="listing-address2"]'))==null?void 0:r.textContent,t=(a=s.querySelector('[data-element="listing-airtable2"]'))==null?void 0:a.textContent,n={address:e,airtable:t};n&&y.push(n)});var p=new autoComplete({placeHolder:"Search for listing...",data:{src:y,keys:["address"],cache:!0},resultItem:{highlight:!0},events:{input:{selection:s=>{let e=s.detail.selection.value;p.input.value=e}}}}),I;(I=document.querySelector("#autoComplete"))==null||I.addEventListener("selection",function(s){let e=s.detail;p.input.blur();let t=e.selection.value[e.selection.key];p.input.value=t;let n=e.selection.value.airtable;H(n).then(r=>U(r))});var M=[];document.querySelectorAll('[data-element="agent-item"]').forEach(s=>{var t,n;let e=((t=s.querySelector('[data-element="agent-first-name"]'))==null?void 0:t.textContent)+" "+((n=s.querySelector('[data-element="agent-last-name"]'))==null?void 0:n.textContent);e&&M.push(e)});var O=new autoComplete({selector:"#Purchaser-Agent",placeHolder:"Search for Agents...",data:{src:M,cache:!0},resultItem:{highlight:!0},events:{input:{selection:s=>{let e=s.detail.selection.value;O.input.value=e}}}}),_=document.querySelector("[at-pat-r]").getAttribute("at-pat-r");async function H(s,e){let t;s=P(s)||"",e?(e=P(e)||"",t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(s)+"?view="+encodeURIComponent(e).replace(/%20/g,"+")):t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+encodeURIComponent(s);let n={Authorization:`Bearer ${_}`};return await(await fetch(t,{headers:n})).json()}var U=s=>{let e=document.querySelector('[data-element="AvailableUnits"]');if(!e)return;let t=e.options.length-1,n;for(n=t;n>=1;n--)e.remove(n);let r=s.records,a=[];r&&(r.forEach(o=>{let i="Unit "+o.fields["Unit/Lot"]+" - $"+X(o.fields.Price)+" / "+(o.fields.Land?o.fields.Land:"")+(o.fields.Land?"sqm / ":"")+o.fields.Beds+" / "+o.fields.Baths+" / "+o.fields["Car Park"];a.push(i)}),a.sort(Y),a.forEach(o=>{let i=document.createElement("option");i.text=o+"",i.value=o+"",e==null||e.add(i)}))},W="a95d779bec144d448ebcafccdec4ce61";function z(){let s=new AddyComplete(document.getElementById("main-address"));s.options.excludePostBox=!1,s.fields={address1:document.getElementById("main-address"),address2:document.getElementById("main-address2"),city:document.getElementById("main-city"),postcode:document.getElementById("main-postcode"),suburb:document.getElementById("main-suburb")}}(function(s,e){let t=s.createElement("script"),n="https://www.addysolutions.com/address-lookup/1.6.2/js/addy.min.js";t.src=n+"?loadcss=true&enableLocation=false&country=nz&nzKey="+W,t.type="text/javascript",t.async=1,t.onload=z,s.body.appendChild(t)})(document,window);var h=(s,e,t)=>{let n=s==null?void 0:s.cloneNode(!0),r=n.querySelector("span"),a=n.querySelector("input");if(!(!r||!a))return r.textContent=e.toString(),a.value=t.toString(),n},N=(s,e,t)=>{let n=e==null?void 0:e.parentElement;e==null||e.remove(),s.forEach((r,a,o)=>{var C,b,L,w,S,x,k,q;let i=r,c="Yes - "+((C=i.querySelector('[data-element="'+t+' Location"]'))==null?void 0:C.textContent)+(t!=="Lawyer"?" ":": ")+((b=i.querySelector('[data-element="'+t+' Name"]'))==null?void 0:b.textContent)+" at "+((L=i.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:L.textContent)+" ("+((w=i.querySelector('[data-element="'+t+' Email"]'))==null?void 0:w.textContent)+" / "+((S=i.querySelector('[data-element="'+t+' Phone"]'))==null?void 0:S.textContent)+") ",v=((x=i.querySelector('[data-element="'+t+' Location"]'))==null?void 0:x.textContent)+": "+((k=i.querySelector('[data-element="'+t+' Name"]'))==null?void 0:k.textContent)+" at "+((q=i.querySelector('[data-element="'+t+' Firm"]'))==null?void 0:q.textContent);if(e){let B=h(e,c,v);if(B&&(n==null||n.append(B)),a===o.length-1){let d;t==="Lawyer"?d=h(e,"No - please fill in purchaser solicitors section below","Custom Lawyer"):d=h(e,"No - please fill in purchaser broker section below","Custom Broker"),d&&(n==null||n.append(d));let R=n==null?void 0:n.querySelector(".w-form-formradioinput:first-child");R&&(R.checked=!0)}}})},V=document.querySelectorAll('[data-element="Lawyer Item"]'),A=document.querySelector('[data-element="Lawyer Radio"]');A&&N(V,A,"Lawyer");var K=document.querySelectorAll('[data-element="Broker Item"]'),E=document.querySelector('[data-element="Broker Radio"]');E&&N(K,E,"Broker");document.addEventListener("click",function(s){var t,n,r,a;let e=s.target;e.classList.contains("lawyer-radio")&&(e.value==="Custom Lawyer"?((t=document.querySelector('[data-element="Custom Lawyer"]'))==null||t.classList.remove("hide"),l(6)):((n=document.querySelector('[data-element="Custom Lawyer"]'))==null||n.classList.add("hide"),l(6))),e.classList.contains("broker-radio")&&(e.value==="Custom Broker"?((r=document.querySelector('[data-element="Custom Broker"]'))==null||r.classList.remove("hide"),l(7)):((a=document.querySelector('[data-element="Custom Broker"]'))==null||a.classList.add("hide"),l(7)))});function X(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Y(s,e){let t=[],n=[];for(s.replace(/(\d+)|(\D+)/g,function(r,a,o){t.push([a||1/0,o||""])}),e.replace(/(\d+)|(\D+)/g,function(r,a,o){n.push([a||1/0,o||""])});t.length&&n.length;){let r=t.shift(),a=n.shift(),o=r[0]-a[0]||r[1].localeCompare(a[1]);if(o)return o}return t.length-n.length}$(()=>{let s=new Proxy(new URLSearchParams(window.location.search),{get:(a,o)=>a.get(o)}),{address:e}=s,{at:t}=s,{atv:n}=s,r=document.querySelector('[data-element="Listing"]');r.value=e,t&&H(t,n).then(a=>U(a))});function P(s){return new DOMParser().parseFromString(s,"text/html").documentElement.textContent}})();
