"use strict";(()=>{$(()=>{let t=$("#upload-agent-listing .w-slider-arrow-left"),s=$("#upload-agent-listing .w-slider-arrow-right"),e=c();d(e),r(e),$("#upload-agent-listing").on("click","#btn-back",function(){e=c(),e=e-1,d(e),r(e),t.trigger("tap")}).on("click","#btn-next",function(){e=c(),y(e)&&(e=e+1,d(e),r(e),s.trigger("tap"))}),window.$memberstackDom.getCurrentMember().then(({data:o})=>{if(o){let i=document.querySelector("#memberstack_id-2");if(!i)return;i.value=o.id}})});var w=t=>{$(".mask---brix-copy.request").css("height",t)},r=t=>{let s=$(window).width();if(s){let e=$("#w-slider-mask-0 .w-slide:nth-child("+t+" ) > .slider-content-wrap---brix").height();if(e){let n=s<324?75:50,o=Math.round(e)+n;w(o+"px")}}},c=()=>{let t=parseInt($(".w-slider-aria-label").text().slice(5,7));return isNaN(t)&&(t=1),t},d=t=>{$("#upload-agent-listing #submit-agent-upload").css("display","none"),t===1&&($("#upload-agent-listing #btn-back").css("display","none"),$("#upload-agent-listing #btn-next").css("display","block")),t===2&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===3&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===4&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","none"),$("#upload-agent-listing #submit-agent-upload").css("display","block"))},y=t=>{if(t===1){let s=$("#REA-Confirm"),e=$("#Agreement-Confirm"),n=$("#Induction-Confirm"),o=$(".error-message.slide1");return!s.prop("checked")||!e.prop("checked")||!n.prop("checked")?(o.html("Please check all checkboxes to proceed.").removeClass("hidden"),!1):(o.addClass("hidden"),!0)}if(t===2){let s=$("#F-Name").val().trim(),e=$("#L-Name").val().trim(),n=$("#Email").val().trim(),o=$("#Mobile").val().trim(),i=$("#Agency").val().trim(),l=$(".error-message.slide2"),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return s===""||e===""||n===""||o===""||i===""?(l.html("Please fill all fields to proceed.").removeClass("hidden"),!1):a.test(n)?(l.addClass("hidden"),!0):(l.html("Please fill all fields to proceedd.").removeClass("hidden"),!1)}if(t===3){let s=$("#TM-URL").val().trim(),e=$(".error-message.slide3");return s===""?(e.html("Please fill TradeMe URL to proceed.").removeClass("hidden"),!1):(E(),e.addClass("hidden"),!0)}},E=()=>{let t=document.getElementById("TM-URL").value,s="https://hook.us1.make.com/lz5r6noi6rc7awx6maf0s560vvths69k?TMURL="+encodeURIComponent(t),e=new XMLHttpRequest;e.open("GET",s,!0),e.onload=function(){if(this.status===200){let n=this.responseText.split("|"),o=n[0],i=n[1],l=n[2],a=parseInt(n[3]),u=n[4],h=document.getElementById("property-name"),m=document.getElementById("tm-thumbnail"),p=document.getElementById("preview-on-tm"),f=document.getElementById("TM-URL"),b=document.getElementById("TM-ID"),k=document.getElementById("Price");if(console.log(a),a>0&&(k.value=u),h.innerHTML=o,m&&i&&(m.src=i),p&&l){let g="https://www.trademe.co.nz/"+l;p.href=g,b.value=l,f.value=g}}else{let n=document.querySelector(".tm-response");n.innerHTML="Error loading response."}},e.send()};})();
