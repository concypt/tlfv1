"use strict";(()=>{$(()=>{let t=$("#upload-agent-listing .w-slider-arrow-left"),s=$("#upload-agent-listing .w-slider-arrow-right"),e=c();r(e),$("#upload-agent-listing").on("click","#btn-back",function(){e=c(),r(e),t.trigger("tap")}).on("click","#btn-next",function(){e+=c(),k(e)&&(e+=c(),r(e),s.trigger("tap"))})});var c=()=>{let t=parseInt($(".w-slider-aria-label").text().slice(5,7));return isNaN(t)&&(t=1),t},r=t=>{console.log(t),t===1&&($("#upload-agent-listing #btn-back").css("display","none"),$("#upload-agent-listing #btn-next").css("display","block")),t===2&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===3&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===4&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","none"))},k=t=>{if(t===1){let s=$("#REA-Confirm"),e=$("#Agreement-Confirm"),n=$("#Induction-Confirm"),l=$(".error-message.slide1");return!s.prop("checked")||!e.prop("checked")||!n.prop("checked")?(l.html("Please check all checkboxes to proceed.").removeClass("hidden"),!1):(l.addClass("hidden"),!0)}if(t===2){let s=$("#F-Name").val().trim(),e=$("#L-Name").val().trim(),n=$("#Email").val().trim(),l=$("#Mobile").val().trim(),a=$("#Agency").val().trim(),o=$(".error-message.slide2"),i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return s===""||e===""||n===""||l===""||a===""?(o.html("Please fill all fields to proceed.").removeClass("hidden"),!1):i.test(n)?(o.addClass("hidden"),!0):(o.html("Please fill all fields to proceedd.").removeClass("hidden"),!1)}if(t===3){let s=$("#TM-URL").val().trim(),e=$(".error-message.slide3");return s===""?(e.html("Please fill TradeMe URL to proceed.").removeClass("hidden"),!1):(E(),e.addClass("hidden"),!0)}},E=()=>{let t=document.getElementById("TM-URL").value,s="https://hook.us1.make.com/lz5r6noi6rc7awx6maf0s560vvths69k?TMURL="+encodeURIComponent(t),e=new XMLHttpRequest;e.open("GET",s,!0),e.onload=function(){if(this.status===200){let n=this.responseText.split("|"),l=n[0],a=n[1],o=n[2],i=n[3],u=n[4],g=document.getElementById("property-name"),d=document.getElementById("tm-thumbnail"),m=document.getElementById("preview-on-tm"),h=document.getElementById("TM-URL"),f=document.getElementById("TM-ID"),b=document.getElementById("Price");if(console.log(i),i>0&&(b.value=u),g.innerHTML=l,d&&a&&(d.src=a),m&&o){let p="https://www.trademe.co.nz/"+o;m.href=p,f.value=o,h.value=p}}else{let n=document.querySelector(".tm-response");n.innerHTML="Error loading response."}},e.send()};})();
