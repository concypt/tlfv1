"use strict";(()=>{$(()=>{let t=$("#upload-agent-listing .w-slider-arrow-left"),o=$("#upload-agent-listing .w-slider-arrow-right"),e=c();r(e),$("#upload-agent-listing").on("click","#btn-back",function(){e=c(),e=e-1,r(e),t.trigger("tap")}).on("click","#btn-next",function(){console.log("next clicked!"),e=c(),k(e)&&(e=e+1,r(e),o.trigger("tap"))}),window.$memberstackDom.getCurrentMember().then(({data:s})=>{if(s){let l=document.querySelector("#memberstack_id-2");if(!l)return;l.value=s.id}})});var c=()=>{let t=parseInt($(".w-slider-aria-label").text().slice(5,7));return isNaN(t)&&(t=1),t},r=t=>{console.log(t),$("#upload-agent-listing #submit-agent-upload").css("display","none"),t===1&&($("#upload-agent-listing #btn-back").css("display","none"),$("#upload-agent-listing #btn-next").css("display","block")),t===2&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===3&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","block")),t===4&&($("#upload-agent-listing #btn-back").css("display","block"),$("#upload-agent-listing #btn-next").css("display","none"),$("#upload-agent-listing #submit-agent-upload").css("display","block"))},k=t=>{if(t===1){let o=$("#REA-Confirm"),e=$("#Agreement-Confirm"),n=$("#Induction-Confirm"),s=$(".error-message.slide1");return!o.prop("checked")||!e.prop("checked")||!n.prop("checked")?(s.html("Please check all checkboxes to proceed.").removeClass("hidden"),!1):(s.addClass("hidden"),!0)}if(t===2){let o=$("#F-Name").val().trim(),e=$("#L-Name").val().trim(),n=$("#Email").val().trim(),s=$("#Mobile").val().trim(),l=$("#Agency").val().trim(),a=$(".error-message.slide2"),i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o===""||e===""||n===""||s===""||l===""?(a.html("Please fill all fields to proceed.").removeClass("hidden"),!1):i.test(n)?(a.addClass("hidden"),!0):(a.html("Please fill all fields to proceedd.").removeClass("hidden"),!1)}if(t===3){let o=$("#TM-URL").val().trim(),e=$(".error-message.slide3");return o===""?(e.html("Please fill TradeMe URL to proceed.").removeClass("hidden"),!1):(y(),e.addClass("hidden"),!0)}},y=()=>{let t=document.getElementById("TM-URL").value,o="https://hook.us1.make.com/lz5r6noi6rc7awx6maf0s560vvths69k?TMURL="+encodeURIComponent(t),e=new XMLHttpRequest;e.open("GET",o,!0),e.onload=function(){if(this.status===200){let n=this.responseText.split("|"),s=n[0],l=n[1],a=n[2],i=parseInt(n[3]),u=n[4],g=document.getElementById("property-name"),d=document.getElementById("tm-thumbnail"),m=document.getElementById("preview-on-tm"),f=document.getElementById("TM-URL"),h=document.getElementById("TM-ID"),b=document.getElementById("Price");if(console.log(i),i>0&&(b.value=u),g.innerHTML=s,d&&l&&(d.src=l),m&&a){let p="https://www.trademe.co.nz/"+a;m.href=p,h.value=a,f.value=p}}else{let n=document.querySelector(".tm-response");n.innerHTML="Error loading response."}},e.send()};})();
